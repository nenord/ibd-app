<div><table class="table table-hover">
    <tr>
        <td class="col-md-4">
            <a href={{ restaurant['url'] }}>
                {{ restaurant['name']}}
            </a><br>
                {{ restaurant['location']['city'] }}<br>
                {% if restaurant['location']['address1'] %}
                <p>{{ restaurant['location']['address1'] }}, {{ restaurant['location']['postal_code'] }}</p>
                {% else %}
                <p>{{ restaurant['location']['postal_code'] }}</p>
                {% endif %}
        </td>
        <td class="col-md-3">
            <p>Rating: {{ restaurant['rating'] }}</p>
            <p>Bassed on {{ restaurant['review_count'] }} rating</p>
        </td>
        <td class="col-md-2">
          <a href={{ restaurant['url'] }}>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Yelp_Logo.svg/1200px-Yelp_Logo.svg.png" width="100" alt="Yelp logo" />
          </a>
        </td>
        <td class="col-md-1"><br>
          <button type="button" id="{{ restaurant['alias'] }}" class="btn btn-primary">Recommend</button>
        </td>
    </tr>
</table></div>
<div class="removable" id="{{ restaurant['alias'] }}">
  <input type="text" id='{{ restaurant['alias'] }}' class="form-control" aria-label="Default"
    aria-describedby="inputGroup-sizing-default" placeholder="Input less than 100 characters">
  <button type="button" name='submit-it' id='{{ restaurant['alias'] }}' class="btn btn-light col-md-1"
    style="margin: 5px">Submit</button>
  <button type="button" name='cancel-it' id='{{ restaurant['alias'] }}' class="btn btn-light col-md-1"
    style="margin: 5px">Cancel</button>
</div>

<script type="text/javascript">
  document.querySelector('[id="{{ restaurant['alias'] }}"][class="removable"]').style.display = 'none';
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelector('[id="{{ restaurant['alias'] }}"][class="btn btn-primary"]').onclick = function () {
      var div_toggle = document.querySelector('[id="{{ restaurant['alias'] }}"][class="removable"]');
      div_toggle.style.display = 'block';
      var buttons_toggle = document.querySelectorAll('.btn-primary');
      buttons_toggle.forEach(function(button) {
        button.disabled = true;
      });
      document.querySelector('[id="{{ restaurant['alias'] }}"][name="cancel-it"]').onclick = function () {
        buttons_toggle.forEach(function(button) {
          button.disabled = false;
        });
        div_toggle.style.display = 'none';
      }
      document.querySelector('[id="{{ restaurant['alias'] }}"][name="submit-it"]').onclick = function () {
        const post = document.querySelector('[id="{{ restaurant['alias'] }}"][type="text"]');
        if (post.value == '') {
          alert('You cannot post empty form.');
        }
        else if (post.value.length > 100) {
           alert('Input should be less than 100 characters.');
        }
        else {
          var send_to_flask ='{{ restaurant.alias }}';
          alert(send_to_flask);
          buttons_toggle.forEach(function(button) {
            button.disabled = false;
          });
          div_toggle.style.display = 'none';
          post.value = "";
        }
      }
    }
  });
</script>
